# Introduction

[Cay](https://github.com/coralproject/cay) is the front-end application for Coral.

It's made up of a series of [React](https://facebook.github.io/react/) components, compiled into modules with [webpack](http://webpack.github.io/).

The webpack build process results in a `bundle.js` file, which contains all Javascript and CSS for Cay. Common issues like CSS cross-browser issues, ES6 transpilation, and minification are all handled by webpack. `bundle.js` lives in-memory until build time (`npm run build`).

The meat of the application lives in the `/src` folder. Components are grouped into subdirectories based on their "domain": for instance, everything that has to do with creating, viewing and editing searches lives in the `search` folder. Similarly, everything having to do with tags lives in the `tags` folder.

The reducers are combined in `/src/app/MainReducer.js`.

# Cay Installation

## Install from source

### Before you begin

Before you begin, be sure you have the following installed and running:

* [Xenia](../../xenia/install)
* [Pillar](../../pillar/install)

In addition, you must have Node.js installed:

* [Node.js](https://nodejs.org/en/download/)
    * You must be running version 5.0.0 or higher of node. You can check your current version of node with the command `node --version`
    * We recommend using [nvm](https://www.npmjs.com/package/nvm) to manage your node installations.

### Get the source

Clone the Cay repository onto your machine:
```
git clone https://github.com/coralproject/cay.git
```
cd into the Cay directory:
```
cd cay
```
Do an npm install to install the node code:
```
npm install
```

### Set up configuration file

The folder called `public` has a sample configuration file, called `config.sample.json`. Copy this file to a new file called `config.json`, that you will edit:
```
cp public/config.sample.json public/config.json
```

Now edit the config.json file.
```{
  "xeniaHost": "",
  "pillarHost": "",
  "elkhornHost": "http://localhost:4444",
  "environment": "development",
  "brand": "",
  "googleAnalyticsId": "UA-12345678-9",
  "requireLogin": false,
  "basicAuthorization": "",
  "features": {
    "ask": false
  }
}
```

For `xeniaHost`, `pillarHost`, and `elkhornHost`, enter the URLs where each service is running.

* For `xeniaHost`:
    * If you installed Xenia [locally from source](../xenia/install), `xeniaHost` should be `http://localhost:4000/1.0/exec/`.
* For `pillarHost`:
    * If you installed Pillar [locally from source](../pillar/install#install-pillar-from-source), `pillarHost` should be `http://localhost:8080`.
    * If you installed Pillar [locally as a Docker container](../pillar/install#install-as-docker-container), `pillarHost` should be `http://10.0.4.105:8080`. `http://10.0.4.105` is the URL generated by Docker.
* For `elkhornHost`:
    * If you installed [locally from source](../elkhorn/install), `elkhornHost` should be `http://localhost:4444`.

* Under `features`, for the time being, only "ask" will have a value of "true". Later, we will be adding fields for our additional two products, Trust and Talk. By setting the value to "true", you are turning on the features that can be seen in Cay.

### Run the app

You can now start Cay by running npm start:
```
npm start
```
You can now visit Cay by visiting the URL [http://localhost:3000](http://localhost:3000).
